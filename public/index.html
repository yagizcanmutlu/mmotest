<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>AGORA – Sosyal Hub</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;background:#000;font-family:Inter,system-ui,Arial}
    #root{height:100dvh;width:100vw;overflow:hidden;position:relative}

    .hud{position:absolute;top:12px;left:12px;display:flex;gap:10px;align-items:center;z-index:10}
    
    .logo{color:#8ef;font-weight:800;letter-spacing:.3px;text-shadow:0 0 8px #48f}
    .points{padding:6px 10px;border:1px solid #2a5;border-radius:8px;color:#aef;background:rgba(10,30,18,.35);backdrop-filter:blur(4px)}
    .help-btn{margin-left:8px; width:32px;height:32px;border-radius:8px;border:1px solid #234;background:rgba(8,10,20,.6);color:#9cf;cursor:pointer;font-weight:800}

    .help{position:absolute;top:56px;left:12px;z-index:12;display:none;
      background:rgba(8,10,20,.92);border:1px solid #234;border-radius:12px;color:#cfe;padding:12px;max-width:320px}
    .help h3{margin:0 0 6px 0;color:#9cf}
    .help ul{padding-left:18px}
    .help small{opacity:.8}

    .cta{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:12;background:rgba(0,0,0,.55);backdrop-filter:blur(4px)}
    .card{padding:18px 16px;background:rgba(8,10,20,.9);border:1px solid #234;border-radius:14px;width:320px;display:flex;flex-direction:column;gap:10px}
    .card h1{color:#9cf;font-size:18px}
    .card input{padding:10px;border-radius:10px;border:1px solid #345;background:#0a0f14;color:#cfe}
    .card button{padding:12px;border-radius:12px;border:0;font-weight:700;background:#1d8f4a;color:#eafff0;cursor:pointer}

    /* Chat sağ altta */
    .chat{position:absolute;right:12px;bottom:12px;width:340px;z-index:10}
    .chat-log{height:150px;overflow:auto;background:rgba(5,7,12,.55);border:1px solid #223;border-radius:10px;padding:8px;color:#cfe}
    .chat-log p{margin:4px 0}
    .chat-input{margin-top:6px;display:flex;gap:6px}
    .chat-input input{flex:1;padding:10px;border-radius:10px;border:1px solid #345;background:#0a0f14;color:#cfe}
    .chat-input button{padding:10px 12px;border-radius:10px;border:0;background:#29549b;color:#e7f0ff;cursor:pointer}

    .floating{position:absolute;top:60px;left:50%;transform:translateX(-50%);color:#aff;text-shadow:0 0 8px #0ff;z-index:10;font-weight:700;display:none}

    /* Mobile controls */
    #joystick{position:absolute;left:14px;bottom:14px;width:120px;height:120px;border-radius:50%;border:1px solid #234;background:rgba(10,14,20,.35);backdrop-filter:blur(3px);z-index:11;touch-action:none}
    #stick{position:absolute;left:50%;top:50%;width:56px;height:56px;transform:translate(-50%,-50%);border-radius:50%;background:rgba(80,180,255,.35);border:1px solid #2a4}
    #lookpad{position:absolute;right:0;bottom:0;width:40vw;height:55vh;z-index:11;touch-action:none}

        .seg{
      display:inline-grid;grid-auto-flow:column;gap:6px;background:rgba(8,10,20,.6);
      border:1px solid #234;border-radius:12px;padding:6px;user-select:none
    }
    .seg input{display:none}
    .seg label{
      padding:8px 12px;border-radius:8px;cursor:pointer;color:#cfe;background:transparent;
      border:1px solid transparent;font-weight:700;letter-spacing:.2px
    }
    .seg input:checked + label{background:#1a2738;border-color:#29549b;color:#e7f0ff;box-shadow:0 0 0 2px rgba(41,84,155,.25) inset}

        /* Sağ üst HUD konteyneri */
    #hud-top-right{
      position: fixed;
      top: 12px;
      right: 14px;
      display: flex;
      flex-direction: column; /* alt alta; yatay istersen row yap */
      align-items: flex-end;
      gap: 6px;
      z-index: 99999;          /* en üstte */
      pointer-events: none;    /* tıklamalar sahneye geçsin */
    }
    #hud-top-right > div{
      pointer-events: auto;    /* hover mümkün olsun */
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(4px);
      color: #d9ecff;
      font: 600 14px/1.2 system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      padding: 6px 10px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,.4);
    }

    /* Gender renk ayrımı */
    #hudGender.-male{   color:#9ad1ff; }
    #hudGender.-female{ color:#ff77aa; }

    /* Giriş panelindeki gender seçim stili */
    .gender-select{
      display:flex; gap:12px; margin-top:10px;
      background: rgba(0,0,0,.35);
      padding:8px 10px; border-radius:10px;
    }
    .gender-select label{
      display:flex; align-items:center; gap:6px;
      color:#e7f4ff; font-weight:600; cursor:pointer;
    }
    .gender-select input{ transform: scale(1.1); }


    @media (max-width: 900px){
      .chat{width:260px}
      .chat-log{height:120px}
    }
  </style>


  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div id="root">
    <div class="hud">
      <div class="logo">AGORA</div>
      <div class="points" id="points">Points: 0</div>
      <button class="help-btn" id="helpBtn">?</button>
    </div>

    <div class="help" id="helpBox">
      <h3>Kontroller</h3>
      <ul>
        <li><b>WASD</b>: İleri/geri & sol/sağ</li>
        <li><b>Fare</b> veya sağ alanı <b>sürükle</b>: Bakış</li>
        <li><b>Tekerlek</b>: Zoom</li>
        <li><b>1–6</b> veya <code>/wave /dance /sit /clap /point /cheer</code></li>
        <li><b>Enter</b>: Chat’e odaklan/aç</li>
      </ul>
      <small>Mobilde: Sol joystick hareket, sağ alan sürükle bakış.</small>
    </div>

    <div class="cta" id="cta">
      <div class="card">
        <h1>Agora'ya katıl</h1>
        <input id="nameInput" placeholder="Görünen adın (ör. Yogi)" maxlength="20" />
        <div class="seg" style="margin-top:6px">
          <input type="radio" id="avatar1" name="avatar" value="1" checked />
          <label for="avatar1">Avatar 1</label>
          <input type="radio" id="avatar2" name="avatar" value="2" />
          <label for="avatar2">Avatar 2</label>
          <input type="radio" id="avatar3" name="avatar" value="3" />
          <label for="avatar3">Avatar 3</label>
        </div>
        <button id="playBtn">Giriş (WASD + Fare • Mobil: Joystick)</button>
      </div>
    </div>




    <div class="chat">
      <div class="chat-log" id="chatLog"></div>
      <div class="chat-input">
        <input id="chatText" placeholder="Mesaj yaz… (/wave, /dance …)" />
        <button id="chatSend">Gönder</button>
      </div>
    </div>

    <!-- Mobile controls -->
    <div id="joystick"><div id="stick"></div></div>
    <div id="lookpad"></div>

    <div class="floating" id="toast"></div>
  </div>
  <script src="client.js"></script>
  <script>
    // ? yardım toggle
    const helpBtn = document.getElementById("helpBtn");
    const helpBox = document.getElementById("helpBox");
    helpBtn.addEventListener("click", ()=> {
      helpBox.style.display = helpBox.style.display === "block" ? "none" : "block";
    });
  </script>
</body>
</html>
